\chapter{Software Architecture Design}
\label{ch:software-architecture-design}

\section{Domain Model}
\label{sec:domain-model}

The architecture reflects a research workflow tailored to the EEG2025 challenge: baseline prediction using CCD-ITI segments and cross-task transfer from SuS. Components:

\begin{itemize}
    \item \textbf{DataLoader:} Ingests BIDS/HED-formatted HBN-EEG, parses events and metadata for SuS and CCD.\footnote{\cite{hbn_fair_2024}.}
    \item \textbf{PreprocessingPipeline:} Bandpass filters, epochs (SuS, CCD-ITI), artifact mitigation, normalization.
    \item \textbf{BaselineModel:} Maps ITI-derived steady-state features to RT and accuracy.
    \item \textbf{TransferTrainer:} Pretrains on SuS steady-state features; fine-tunes on CCD-ITI for behavior prediction.
    \item \textbf{Evaluator:} Computes metrics (MAE for RT, accuracy/F1), produces SNR/ERP verification plots.
    \item \textbf{Visualizer:} Summarizes metrics and renders spectra/evoked responses.
\end{itemize}

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.75\textwidth]{figures/architecture/design-class-diagram-eeg}
    \caption{Updated Class Diagram (placeholder); replace with current project UML when available.}
    \label{fig:design-class}
\end{figure}

\section{Training and Evaluation Flow}
\label{sec:sequence-diagram}

\textbf{Scenario: Baseline and Transfer Workflow}
\begin{enumerate}
    \item Load SuS and CCD-ITI segments; preprocess and verify SSVEP/P300.
    \item Train baseline on CCD-ITI to predict RT/accuracy.
    \item Pretrain on SuS steady-state; fine-tune on CCD-ITI for transfer.
    \item Evaluate metrics and visualize spectra/evoked responses.
\end{enumerate}

\section{Method Notes}
\label{sec:method-notes}

\begin{itemize}
    \item \textbf{Features:} Spectral power at stimulation frequencies and harmonics; topographic distributions.
    \item \textbf{Metrics:} RT regression (MAE/MSE); accuracy classification (Accuracy/F1).
    \item \textbf{Plots:} SNR spectra, evoked response overlays for SuS and CCD.
\end{itemize}